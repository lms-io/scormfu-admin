<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <!-- Use title if it's in the page YAML frontmatter -->
    <title>Welcome to Scorm-Fu</title>
    
    <link href="/stylesheets/normalize.css" rel="stylesheet" type="text/css" /><link href="/stylesheets/all.css" rel="stylesheet" type="text/css" />
    <script src="/javascripts/all.js" type="text/javascript"></script>
  </head>
  
  <body class="index">
    <script src="components/organization.js" type="text/javascript"></script>
<script id="organization-list-template" type="text/x-handlebars-template">
<div class="organization-create modal fade"></div>

<div class="panel-heading">
  Organizations 
  <a href="#" 
    onclick='organizationController.create.dispatch();'>
      Create New
  </a>
</div>
<div class="panel-body">
  <table class="table" id="list-organizations-content">
    <tr><th>Name</th><th>ID</th><th></th><th>Actions</th></tr>
    {{#each .}}
      <tr>
        <td>{{name}}</td>
        <td>{{id}}</td>
        <td>&nbsp;</td>
        <td>
          course 
          <a href='#'
            onclick='courseController.create.dispatch("{{id}}");'>
              create</a> 
          <a href='#'
            onclick='courseController.list.dispatch("{{id}}");'>
              list</a> | 
          registration 
          <a href='#'
            onclick='registrationController.create.dispatch("{{id}}");'>
              create</a> 
          <a href='#'
            onclick='registrationController.list.dispatch("{{id}}");'>
              list</a> | 

        </td>
      </tr>
    {{/each}}
  </table>
</div>
</script>

<script id="organization-create-template" type="text/x-handlebars-template">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Create Organization</h4>
      </div>
      <div class="modal-body">
        <form> 
          <div class="form-group">
            <label for="name">Name</label>
            <input type="name" class="form-control" id="name" placeholder="Name">
          </div>
          <div class="form-group">
            <label for="name">Key (optional)</label>
            <input type="name" class="form-control" id="id">
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button 
          type="button" 
          class="btn btn-primary" 
          onclick="organizationController.save.dispatch()">Save changes</button>
      </div>
    </div>
  </div>
</script>


<script src="components/course.js" type="text/javascript"></script>
<div class="course-list modal fade"></div>

<script id="course-list-template" type="text/x-handlebars-template">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">Courses</h4>
      </div>
      <div class="modal-body">
        <table class="table" id="list-courses-content">
          <tr><th>Name</th><th>ID</th><th></th><th>Actions</th></tr>
          {{#each .}}
            <tr>
              <td>{{name}}</td>
              <td>{{id}}</td>
              <td>&nbsp;</td>
              <td>
                <a href='#'>remove</a> 
              </td>
            </tr>
          {{/each}}
        </table>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</script>

<div class="course-create modal fade"></div>

<script id="course-create-template" type="text/x-handlebars-template">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Create Course</h4>
      </div>
      <div class="modal-body">
        <form id='course-create'> 
          <div class="form-group">
            <label for="name">Name</label>
            <input type="name" class="form-control" id="name" placeholder="Name">
          </div>
          <div class="form-group">
            <label for="name">Key (optional)</label>
            <input type="name" class="form-control" id="id">
          </div>
          <div class="form-group">
            <label for="upload">Course</label>
            <input type="file" class="form-control" id="upload">
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button 
          type="button" 
          class="btn btn-primary" 
          onclick="courseController.save.dispatch('{{organization}}')">Save changes</button>
      </div>
    </div>
  </div>
</script>


<script src="components/registration.js" type="text/javascript"></script>
<div class="registration-list modal fade"></div>

<script id="registration-list-template" type="text/x-handlebars-template">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">Courses</h4>
      </div>
      <div class="modal-body">
        <table class="table" id="list-registrations-content">
          <tr><th>Name</th><th>ID</th><th></th><th>Actions</th></tr>
          {{#each .}}
            <tr>
              <td>{{name}}</td>
              <td>{{id}}</td>
              <td>&nbsp;</td>
              <td>
                <a href='#'>remove</a> 
              </td>
            </tr>
          {{/each}}
        </table>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</script>

<div class="registration-create modal fade"></div>

<script id="registration-create-template" type="text/x-handlebars-template">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Create Registration</h4>
      </div>
      <div class="modal-body">
        <form id='registration-create'> 
          <div class="form-group">
            <label for="name">Name</label>
            <input type="name" class="form-control" id="name" placeholder="Name">
          </div>
          <div class="form-group">
            <label for="name">Key (optional)</label>
            <input type="name" class="form-control" id="id">
          </div>
          <div class="form-group">
            <ul class="list-group checked-list-box">
            {{#each courses}}
              <li class="list-group-item"><div class='checkbox'><label><input type='checkbox' value='{{id}}' id='course'> {{name}}</label></div>
            {{/each}}
            </ul>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button 
          type="button" 
          class="btn btn-primary" 
          onclick="registrationController.save.dispatch('{{organization}}')">Save changes</button>
      </div>
    </div>
  </div>
</script>


<div class="container organization-list">
  <div class="panel panel-default" id="content"> 

    <div class="panel-heading">
      Log in 
    </div>
    <div class="panel-body" id="form-login">
      <form>
        <div class="form-group">
          <label for="key">Login Key</label>
          <input type="key" class="form-control" id="key" placeholder="Key">
        </div>
        <a class="btn btn-default" onclick="login()">Login</a>
      </form>
    </div>

  </div>
</div>


<script language="javascript">
var _KEY_ = "";
function login() {
  _KEY_ = $("#key").val();
  var url = configuration.scormfu + _KEY_; 
  $.ajax({
      url:url, 
      jsonp: "callback",
      dataType: "jsonp",
      success: function( response ) {
        if(response) {
          console.log("login successful");
          $("#form-login").fadeOut();
          organizationController.list.dispatch();
        } 
      }
  });
}
</script>


  </body>

</html>
